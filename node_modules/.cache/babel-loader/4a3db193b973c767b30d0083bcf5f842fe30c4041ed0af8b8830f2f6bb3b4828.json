{"ast":null,"code":"import _regeneratorRuntime from \"/Users/hacktheplanet/Documents/GitHub/blog-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/hacktheplanet/Documents/GitHub/blog-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { createWorkerTimers } from \"./workerTimers\";\nfunction Poller() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      delayInMs: 1e3\n    },\n    delayInMs = _ref.delayInMs;\n  var workerTimers = createWorkerTimers();\n  var timerId;\n  var stopped = false;\n  var stop = function stop() {\n    if (timerId) {\n      workerTimers.clearTimeout(timerId);\n      workerTimers.cleanup();\n    }\n    stopped = true;\n  };\n  var run = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(cb) {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            stopped = false;\n            _context.next = 3;\n            return cb(stop);\n          case 3:\n            if (!stopped) {\n              _context.next = 5;\n              break;\n            }\n            return _context.abrupt(\"return\");\n          case 5:\n            timerId = workerTimers.setTimeout(function () {\n              void run(cb);\n            }, delayInMs);\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n    return function run(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  return {\n    run: run,\n    stop: stop\n  };\n}\nexport { Poller };","map":{"version":3,"names":["createWorkerTimers","Poller","_ref","arguments","length","undefined","delayInMs","workerTimers","timerId","stopped","stop","clearTimeout","cleanup","run","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","cb","wrap","_callee$","_context","prev","next","abrupt","setTimeout","_x","apply"],"sources":["/Users/hacktheplanet/Documents/GitHub/blog-frontend/node_modules/@clerk/shared/src/utils/poller.ts"],"sourcesContent":["import { createWorkerTimers } from './workerTimers';\n\nexport type PollerStop = () => void;\nexport type PollerCallback = (stop: PollerStop) => Promise<unknown>;\nexport type PollerRun = (cb: PollerCallback) => Promise<void>;\n\ntype PollerOptions = {\n  delayInMs: number;\n};\n\nexport type Poller = {\n  run: PollerRun;\n  stop: PollerStop;\n};\n\nexport function Poller({ delayInMs }: PollerOptions = { delayInMs: 1000 }): Poller {\n  const workerTimers = createWorkerTimers();\n\n  let timerId: number | undefined;\n  let stopped = false;\n\n  const stop: PollerStop = () => {\n    if (timerId) {\n      workerTimers.clearTimeout(timerId);\n      workerTimers.cleanup();\n    }\n    stopped = true;\n  };\n\n  const run: PollerRun = async cb => {\n    stopped = false;\n    await cb(stop);\n    if (stopped) {\n      return;\n    }\n\n    timerId = workerTimers.setTimeout(() => {\n      void run(cb);\n    }, delayInMs) as any as number;\n  };\n\n  return { run, stop };\n}\n"],"mappings":";;AAAA,SAASA,kBAAA,QAA0B;AAe5B,SAASC,OAAA,EAAmE;EAAA,IAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAA7B;MAAEG,SAAA,EAAW;IAAK;IAA/CA,SAAA,GAAAJ,IAAA,CAAAI,SAAA;EACvB,IAAMC,YAAA,GAAeP,kBAAA,CAAmB;EAExC,IAAIQ,OAAA;EACJ,IAAIC,OAAA,GAAU;EAEd,IAAMC,IAAA,GAAmB,SAAnBA,KAAA,EAAyB;IAC7B,IAAIF,OAAA,EAAS;MACXD,YAAA,CAAaI,YAAA,CAAaH,OAAO;MACjCD,YAAA,CAAaK,OAAA,CAAQ;IACvB;IACAH,OAAA,GAAU;EACZ;EAEA,IAAMI,GAAA;IAAA,IAAAC,KAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAiB,SAAAC,QAAMC,EAAA;MAAA,OAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;UAAA;YAC3Bf,OAAA,GAAU;YAAAa,QAAA,CAAAE,IAAA;YAAA,OACJL,EAAA,CAAGT,IAAI;UAAA;YAAA,KACTD,OAAA;cAAAa,QAAA,CAAAE,IAAA;cAAA;YAAA;YAAA,OAAAF,QAAA,CAAAG,MAAA;UAAA;YAIJjB,OAAA,GAAUD,YAAA,CAAamB,UAAA,CAAW,YAAM;cACtC,KAAKb,GAAA,CAAIM,EAAE;YACb,GAAGb,SAAS;UAAA;UAAA;YAAA,OAAAgB,QAAA,CAAAZ,IAAA;QAAA;MAAA,GAAAQ,OAAA;IAAA,CACd;IAAA,gBAVML,IAAAc,EAAA;MAAA,OAAAb,KAAA,CAAAc,KAAA,OAAAzB,SAAA;IAAA;EAAA,GAUN;EAEA,OAAO;IAAEU,GAAA,EAAAA,GAAA;IAAKH,IAAA,EAAAA;EAAK;AACrB"},"metadata":{},"sourceType":"module","externalDependencies":[]}