{"ast":null,"code":"import { isomorphicAtob } from \"./isomorphicAtob\";\nvar PUBLISHABLE_KEY_LIVE_PREFIX = \"pk_live_\";\nvar PUBLISHABLE_KEY_TEST_PREFIX = \"pk_test_\";\nvar PUBLISHABLE_FRONTEND_API_DEV_REGEX = /^(([a-z]+)-){2}([0-9]{1,2})\\.clerk\\.accounts([a-z.]*)(dev|com)$/i;\nfunction buildPublishableKey(frontendApi) {\n  var keyPrefix = PUBLISHABLE_FRONTEND_API_DEV_REGEX.test(frontendApi) ? PUBLISHABLE_KEY_TEST_PREFIX : PUBLISHABLE_KEY_LIVE_PREFIX;\n  return \"\".concat(keyPrefix).concat(btoa(\"\".concat(frontendApi, \"$\")));\n}\nfunction parsePublishableKey(key) {\n  key = key || \"\";\n  if (!isPublishableKey(key)) {\n    return null;\n  }\n  var instanceType = key.startsWith(PUBLISHABLE_KEY_LIVE_PREFIX) ? \"production\" : \"development\";\n  var frontendApi = isomorphicAtob(key.split(\"_\")[2]);\n  if (!frontendApi.endsWith(\"$\")) {\n    return null;\n  }\n  frontendApi = frontendApi.slice(0, -1);\n  return {\n    instanceType: instanceType,\n    frontendApi: frontendApi\n  };\n}\nfunction isPublishableKey(key) {\n  key = key || \"\";\n  var hasValidPrefix = key.startsWith(PUBLISHABLE_KEY_LIVE_PREFIX) || key.startsWith(PUBLISHABLE_KEY_TEST_PREFIX);\n  var hasValidFrontendApiPostfix = isomorphicAtob(key.split(\"_\")[2] || \"\").endsWith(\"$\");\n  return hasValidPrefix && hasValidFrontendApiPostfix;\n}\nfunction isLegacyFrontendApiKey(key) {\n  key = key || \"\";\n  return key.startsWith(\"clerk.\");\n}\nfunction createDevOrStagingUrlCache() {\n  var DEV_OR_STAGING_SUFFIXES = [\".lcl.dev\", \".stg.dev\", \".lclstage.dev\", \".stgstage.dev\", \".dev.lclclerk.com\", \".stg.lclclerk.com\", \".accounts.lclclerk.com\", \"accountsstage.dev\", \"accounts.dev\"];\n  var devOrStagingUrlCache = /* @__PURE__ */new Map();\n  return {\n    isDevOrStagingUrl: function isDevOrStagingUrl(url) {\n      if (!url) {\n        return false;\n      }\n      var hostname = typeof url === \"string\" ? url : url.hostname;\n      var res = devOrStagingUrlCache.get(hostname);\n      if (res === void 0) {\n        res = DEV_OR_STAGING_SUFFIXES.some(function (s) {\n          return hostname.endsWith(s);\n        });\n        devOrStagingUrlCache.set(hostname, res);\n      }\n      return res;\n    }\n  };\n}\nexport { buildPublishableKey, createDevOrStagingUrlCache, isLegacyFrontendApiKey, isPublishableKey, parsePublishableKey };","map":{"version":3,"names":["isomorphicAtob","PUBLISHABLE_KEY_LIVE_PREFIX","PUBLISHABLE_KEY_TEST_PREFIX","PUBLISHABLE_FRONTEND_API_DEV_REGEX","buildPublishableKey","frontendApi","keyPrefix","test","concat","btoa","parsePublishableKey","key","isPublishableKey","instanceType","startsWith","split","endsWith","slice","hasValidPrefix","hasValidFrontendApiPostfix","isLegacyFrontendApiKey","createDevOrStagingUrlCache","DEV_OR_STAGING_SUFFIXES","devOrStagingUrlCache","Map","isDevOrStagingUrl","url","hostname","res","get","some","s","set"],"sources":["/Users/hacktheplanet/Documents/GitHub/blog-frontend/node_modules/@clerk/shared/src/utils/keys.ts"],"sourcesContent":["import type { PublishableKey } from '@clerk/types';\n\nimport { isomorphicAtob } from './isomorphicAtob';\n\nconst PUBLISHABLE_KEY_LIVE_PREFIX = 'pk_live_';\nconst PUBLISHABLE_KEY_TEST_PREFIX = 'pk_test_';\n\n// This regex matches the publishable like frontend API keys (e.g. foo-bar-13.clerk.accounts.dev)\nconst PUBLISHABLE_FRONTEND_API_DEV_REGEX = /^(([a-z]+)-){2}([0-9]{1,2})\\.clerk\\.accounts([a-z.]*)(dev|com)$/i;\n\nexport function buildPublishableKey(frontendApi: string): string {\n  const keyPrefix = PUBLISHABLE_FRONTEND_API_DEV_REGEX.test(frontendApi)\n    ? PUBLISHABLE_KEY_TEST_PREFIX\n    : PUBLISHABLE_KEY_LIVE_PREFIX;\n  return `${keyPrefix}${btoa(`${frontendApi}$`)}`;\n}\n\nexport function parsePublishableKey(key: string | undefined): PublishableKey | null {\n  key = key || '';\n\n  if (!isPublishableKey(key)) {\n    return null;\n  }\n\n  const instanceType = key.startsWith(PUBLISHABLE_KEY_LIVE_PREFIX) ? 'production' : 'development';\n\n  let frontendApi = isomorphicAtob(key.split('_')[2]);\n\n  if (!frontendApi.endsWith('$')) {\n    return null;\n  }\n\n  frontendApi = frontendApi.slice(0, -1);\n\n  return {\n    instanceType,\n    frontendApi,\n  };\n}\n\nexport function isPublishableKey(key: string) {\n  key = key || '';\n\n  const hasValidPrefix = key.startsWith(PUBLISHABLE_KEY_LIVE_PREFIX) || key.startsWith(PUBLISHABLE_KEY_TEST_PREFIX);\n\n  const hasValidFrontendApiPostfix = isomorphicAtob(key.split('_')[2] || '').endsWith('$');\n\n  return hasValidPrefix && hasValidFrontendApiPostfix;\n}\n\nexport function isLegacyFrontendApiKey(key: string) {\n  key = key || '';\n\n  return key.startsWith('clerk.');\n}\n\nexport function createDevOrStagingUrlCache() {\n  const DEV_OR_STAGING_SUFFIXES = [\n    '.lcl.dev',\n    '.stg.dev',\n    '.lclstage.dev',\n    '.stgstage.dev',\n    '.dev.lclclerk.com',\n    '.stg.lclclerk.com',\n    '.accounts.lclclerk.com',\n    'accountsstage.dev',\n    'accounts.dev',\n  ];\n\n  const devOrStagingUrlCache = new Map<string, boolean>();\n\n  return {\n    isDevOrStagingUrl: (url: string | URL): boolean => {\n      if (!url) {\n        return false;\n      }\n\n      const hostname = typeof url === 'string' ? url : url.hostname;\n      let res = devOrStagingUrlCache.get(hostname);\n      if (res === undefined) {\n        res = DEV_OR_STAGING_SUFFIXES.some(s => hostname.endsWith(s));\n        devOrStagingUrlCache.set(hostname, res);\n      }\n      return res;\n    },\n  };\n}\n"],"mappings":"AAEA,SAASA,cAAA,QAAsB;AAE/B,IAAMC,2BAAA,GAA8B;AACpC,IAAMC,2BAAA,GAA8B;AAGpC,IAAMC,kCAAA,GAAqC;AAEpC,SAASC,oBAAoBC,WAAA,EAA6B;EAC/D,IAAMC,SAAA,GAAYH,kCAAA,CAAmCI,IAAA,CAAKF,WAAW,IACjEH,2BAAA,GACAD,2BAAA;EACJ,UAAAO,MAAA,CAAUF,SAAA,EAAAE,MAAA,CAAYC,IAAA,IAAAD,MAAA,CAAQH,WAAA,MAAc;AAC9C;AAEO,SAASK,oBAAoBC,GAAA,EAAgD;EAClFA,GAAA,GAAMA,GAAA,IAAO;EAEb,IAAI,CAACC,gBAAA,CAAiBD,GAAG,GAAG;IAC1B,OAAO;EACT;EAEA,IAAME,YAAA,GAAeF,GAAA,CAAIG,UAAA,CAAWb,2BAA2B,IAAI,eAAe;EAElF,IAAII,WAAA,GAAcL,cAAA,CAAeW,GAAA,CAAII,KAAA,CAAM,GAAG,EAAE,CAAC,CAAC;EAElD,IAAI,CAACV,WAAA,CAAYW,QAAA,CAAS,GAAG,GAAG;IAC9B,OAAO;EACT;EAEAX,WAAA,GAAcA,WAAA,CAAYY,KAAA,CAAM,GAAG,EAAE;EAErC,OAAO;IACLJ,YAAA,EAAAA,YAAA;IACAR,WAAA,EAAAA;EACF;AACF;AAEO,SAASO,iBAAiBD,GAAA,EAAa;EAC5CA,GAAA,GAAMA,GAAA,IAAO;EAEb,IAAMO,cAAA,GAAiBP,GAAA,CAAIG,UAAA,CAAWb,2BAA2B,KAAKU,GAAA,CAAIG,UAAA,CAAWZ,2BAA2B;EAEhH,IAAMiB,0BAAA,GAA6BnB,cAAA,CAAeW,GAAA,CAAII,KAAA,CAAM,GAAG,EAAE,CAAC,KAAK,EAAE,EAAEC,QAAA,CAAS,GAAG;EAEvF,OAAOE,cAAA,IAAkBC,0BAAA;AAC3B;AAEO,SAASC,uBAAuBT,GAAA,EAAa;EAClDA,GAAA,GAAMA,GAAA,IAAO;EAEb,OAAOA,GAAA,CAAIG,UAAA,CAAW,QAAQ;AAChC;AAEO,SAASO,2BAAA,EAA6B;EAC3C,IAAMC,uBAAA,GAA0B,CAC9B,YACA,YACA,iBACA,iBACA,qBACA,qBACA,0BACA,qBACA,eACF;EAEA,IAAMC,oBAAA,GAAuB,mBAAIC,GAAA,CAAqB;EAEtD,OAAO;IACLC,iBAAA,EAAmB,SAAAA,kBAACC,GAAA,EAA+B;MACjD,IAAI,CAACA,GAAA,EAAK;QACR,OAAO;MACT;MAEA,IAAMC,QAAA,GAAW,OAAOD,GAAA,KAAQ,WAAWA,GAAA,GAAMA,GAAA,CAAIC,QAAA;MACrD,IAAIC,GAAA,GAAML,oBAAA,CAAqBM,GAAA,CAAIF,QAAQ;MAC3C,IAAIC,GAAA,KAAQ,QAAW;QACrBA,GAAA,GAAMN,uBAAA,CAAwBQ,IAAA,CAAK,UAAAC,CAAA;UAAA,OAAKJ,QAAA,CAASX,QAAA,CAASe,CAAC,CAAC;QAAA;QAC5DR,oBAAA,CAAqBS,GAAA,CAAIL,QAAA,EAAUC,GAAG;MACxC;MACA,OAAOA,GAAA;IACT;EACF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}